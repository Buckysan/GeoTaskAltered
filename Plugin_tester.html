<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>jsPsych Plugin Test</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/jspsych@7.0.0/css/jspsych.css">
    <script src="./src/utils.js"></script>
    <script src="./src/nonMedScenarios.js"></script>
    <script src="./src/scenarioFileTutorial.js"></script>
    <script src="./src/src.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="./jspsych/dist/jspsych.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-image-button-response.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-image-button-response-altered.js" type="text/javascript"></script>   
    <script src="./jspsych/dist/plugin-instructions.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-survey-multi-choice.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-survey-multi-select.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-survey-multi-select-limit-sliders.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-survey-text.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-canvas-slider-response.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-canvas-slider-response-with-buttons.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-free-text-ranked-list.js" type="text/javascript"></script>
    <script src="./jspsych/dist/plugin-free-text-ranked-list-datalist.js" type="text/javascript"></script>
    <link rel="stylesheet" href="./style/styleIST.css"/>
    <link rel="shortcut icon" href="#" />
</head>
<body class="jspsych-display-element" tabindex="0" style="margin: 0; height: 100%; width: 100%;">
    <div class="jspsych-content-wrapper" style="height: 100vh;">
        <div id="jspsych-content" class="jspsych-content">
            <h1 id="initHeader">Loading...</h1>
            <p id="initText">If you continue to see this message after around 10 seconds, something has gone wrong. In order to run
                properly the experiment requires a modern browser with javascript enabled.</p>
        </div>
    </div>
<div id="jspsych-target"></div>

<script>
    const countryList = [
        "Afghanistan", "Albania", "Algeria", "Zimbabwe"
    ];

    // Initialize jsPsych
    var jsPsych = initJsPsych({
        on_finish: function() {
            jsPsych.data.displayData();
        }
    });

    // Example default values for missing variables
    const sliderLabels = ["Least", "Most"];
    const sliderName = "Country Preference";
    const scaleLabels = ["1", "2", "3", "4", "5"];
    const scaleName = "Importance";
    const addButtonPrompt = "Add more countries";
    const scaleError = "Please rate the importance";

    // Define the custom plugin trial
    var trial = {
        type: jsPsychFreeTextRankedListDatalist,  // Replace with correct plugin reference
        prompt: "<p>Input your list of countries:</p>",
        slider_labels: sliderLabels,
        slider_start: 5,
        slider_prompt: sliderName,
        slider_width: 200,
        scale_questions: false,
        scale_labels: scaleLabels,
        scale_prompt: scaleName,
        add_button_prompt: addButtonPrompt,
        blank_scale_error: scaleError,
        draggable_list: false,
        suggestion_list: countryList,
        on_load: function(){
            console.log("Trial loaded");
        },
        on_finish: function(trial){
            responsesArray.push(data.response);
            console.log(responsesArray);
        }
    };

    // Define a timeline
    var timeline = [trial];

    // Start the experiment
    jsPsych.run(timeline);
</script>

</body>
</html>
